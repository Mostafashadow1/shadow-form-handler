(()=>{"use strict";var e,t,n={811:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorManager=void 0;var n=function(){function e(e){this.fieldManager=e,this.errorStyles={property:" ",value:""}}return e.prototype.setErrorStyles=function(e){this.errorStyles=e},e.prototype.applyStyles=function(e){for(var t=0,n=Object.entries(this.errorStyles);t<n.length;t++){var r=n[t],i=r[0],o=r[1];e.style[i]=o}},e.prototype.displayErrors=function(e){var t=this;e.forEach((function(e){var n=document.getElementById("".concat(e.id,"-error"));n&&(n.textContent=e.error||"",t.applyStyles(n))}))},e.prototype.clearErrors=function(){document.querySelectorAll(".error-message").forEach((function(e){e.textContent=""}))},e.prototype.hasErrors=function(){return this.fieldManager.getAllFields().some((function(e){return null!==e.error}))},e.prototype.getErrors=function(){return this.fieldManager.getAllFields().map((function(e){var t;return(t={})[e.id]=e.error,t}))},e}();t.ErrorManager=n},818:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;var i=function(){function e(e,t,n){this.fieldManager=e,this.validator=t,this.hooksHandler=n}return e.prototype.addRuntimeValidation=function(e){var t=document.getElementById(e);t&&t.addEventListener("input",this.handleInputChange.bind(this))},e.prototype.handleInputChange=function(e){return n(this,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return t=e.target,(n=this.fieldManager.getField(t.id))?(n.value=t.value,this.hooksHandler.triggerHook("onValueChange",n.id,n.value),[4,this.validator.validateField(n.id)]):[2];case 1:return r.sent(),[2]}}))}))},e.prototype.addCustomEventListener=function(e,t,n){var r=document.getElementById(e);r?r.addEventListener(t,n):console.error('Input element with id "'.concat(e,'" not found.'))},e}();t.EventManager=i},165:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldManager=void 0;var n=function(){function e(){this.fields=[]}return e.prototype.register=function(e){var t=this,n=e.id,r=e.schemaValidation,i=e.customValidation,o=e.initialValue,a=e.dependencies;this.fields.push({id:n,value:o||"",error:null,schemaValidation:r,customValidation:i,dependencies:a});var l=document.getElementById(n);if(!l)throw new Error("Input element with id ".concat(n," not found"));l.addEventListener("input",(function(n){var r=n.target;t.setValue(e.id,r.value)})),o&&(l.value=o)},e.prototype.removeField=function(e){var t=document.getElementById(e.fieldId);if(t){if(e.disabledId){var n=document.getElementById(e.disabledId);n&&(n.disabled=!0)}this.fields=this.fields.filter((function(t){return t.id!==e.fieldId}));var r=document.getElementById("".concat(e.fieldId,"-error")),i=document.querySelector('label[for="'.concat(e.fieldId,'"]'));t.remove(),null==r||r.remove(),null==i||i.remove()}else console.error("Element with id ".concat(e.fieldId," not found."))},e.prototype.addField=function(e){var t,n,r;if(document.getElementById(e.fieldId))console.warn("Field with id ".concat(e.fieldId," already exists. Skipping creation."));else{if(e.disabledId){var i=document.getElementById(e.disabledId);i&&(i.disabled=!0)}var o=document.getElementById(e.containerId);if(!o)throw new Error("Container element with id ".concat(e.containerId," not found"));var a=document.createElement("div"),l=document.createElement("label"),u=document.createElement("input"),s=document.createElement("span");if(l.setAttribute("for",e.fieldId),l.textContent=e.labelText,u.setAttribute("id",e.fieldId),u.setAttribute("name",e.fieldId),u.setAttribute("type","text"),s.setAttribute("id","".concat(e.fieldId,"-error")),s.classList.add("error-message"),a.appendChild(l),a.appendChild(u),a.appendChild(s),e.position)if("top"===e.position)o.insertBefore(a,o.firstChild);else if("bottom"===e.position)o.appendChild(a);else{if(!("number"==typeof e.position&&e.position>=0))throw new Error("Invalid position value: ".concat(e.position));var d=o.children[e.position];d&&o.insertBefore(a,d)}else o.appendChild(a);this.register({id:e.fieldId,initialValue:(null===(t=e.register)||void 0===t?void 0:t.initialValue)||"",schemaValidation:(null===(n=e.register)||void 0===n?void 0:n.schemaValidation)||[],customValidation:(null===(r=e.register)||void 0===r?void 0:r.customValidation)||[]})}},e.prototype.getField=function(e){return this.fields.find((function(t){return t.id===e}))},e.prototype.getAllFields=function(){return this.fields},e.prototype.setValue=function(e,t){var n=this.getField(e);n&&(n.value=t)},e.prototype.getValue=function(e){var t=this.getField(e);return null==t?void 0:t.value},e.prototype.getValues=function(){var e={};return this.fields.forEach((function(t){e[t.id]=t.value})),e},e.prototype.resetFields=function(){this.fields.forEach((function(e){e.value="",e.error=null;var t=document.getElementById(e.id);t&&(t.value="")}))},e}();t.FieldManager=n},830:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormHandler=void 0;var u=n(165),s=n(343),d=n(811),c=n(818),f=n(466),h=o(n(100)),p=n(253),g=function(){function e(){this.mode="default",this.validation=h,this.lang=p.lang,this.hooksHandler=new f.HooksHandler,this.fieldManager=new u.FieldManager,this.errorManager=new d.ErrorManager(this.fieldManager),this.validatorManager=new s.ValidatorManager(this.fieldManager,this.errorManager,this.hooksHandler),this.eventManager=new c.EventManager(this.fieldManager,this.validatorManager,this.hooksHandler)}return e.prototype.register=function(e){this.hooksHandler.triggerHook("beforeFieldRegister",e.id,e),this.fieldManager.register(e),console.log(this.mode),"runtime"===this.mode&&this.eventManager.addRuntimeValidation(e.id),this.hooksHandler.triggerHook("afterFieldRegister",e.id,e),this.attachFocusBlurListeners(e.id),e.dependencies&&this.setupFieldValidation(e.id)},e.prototype.setupFieldValidation=function(e){var t=this,n=this.fieldManager.getField(e);if(n){var r=document.getElementById(e);r&&r.addEventListener("input",(function(){t.validatorManager.validateField(e)})),n.dependencies&&n.dependencies.forEach((function(n){var r=document.getElementById(n);r&&r.addEventListener("input",(function(){t.validatorManager.validateField(e)}))}))}},e.prototype.setMode=function(e){this.mode=e},e.prototype.submitHandler=function(e,t){var n=this,r=document.getElementById(e);if(!r)throw new Error("Form not found. Please ensure the form ID is correct!");r.addEventListener("submit",(function(e){return a(n,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return e.preventDefault(),[4,this.validatorManager.validateAll()];case 1:return r.sent(),n=this.fieldManager.getValues(),this.errorManager.hasErrors()?(this.errorManager.displayErrors(this.fieldManager.getAllFields()),this.hooksHandler.triggerHook("onFormSubmitFail",this.errorManager.getErrors())):t&&(t(n),this.hooksHandler.triggerHook("onFormSubmitSuccess",n)),[2]}}))}))}))},e.prototype.getValue=function(e){return this.fieldManager.getValue(e)},e.prototype.getValues=function(){return this.fieldManager.getValues()},e.prototype.resetForm=function(){this.fieldManager.resetFields(),this.errorManager.clearErrors(),this.hooksHandler.triggerHook("onFormReset")},e.prototype.removeField=function(e){this.fieldManager.removeField(e),this.hooksHandler.triggerHook("onFieldRemove",e.fieldId)},e.prototype.addField=function(e){this.fieldManager.addField(e),"runtime"===this.mode&&this.eventManager.addRuntimeValidation(e.fieldId),this.errorManager.displayErrors(this.fieldManager.getAllFields()),this.hooksHandler.triggerHook("onFieldAdd",e.fieldId)},e.prototype.setErrorStyles=function(e){this.errorManager.setErrorStyles(e)},e.prototype.addHooks=function(e){this.hooksHandler.addHooks(e)},e.prototype.addCustomEventListener=function(e,t,n){this.eventManager.addCustomEventListener(e,t,n)},e.prototype.attachFocusBlurListeners=function(e){var t=this,n=document.getElementById(e);n?(n.addEventListener("focus",(function(){var n=t.fieldManager.getField(e);n&&t.hooksHandler.triggerHook("onFocus",n)})),n.addEventListener("blur",(function(){var n=t.fieldManager.getField(e);n&&t.hooksHandler.triggerHook("onBlur",n)}))):console.warn('Input element with id "'.concat(e,'" not found.'))},e}();t.FormHandler=g},466:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HooksHandler=void 0;var n=function(){function e(){this.hooks={}}return e.prototype.addHooks=function(e){this.hooks=e},e.prototype.getHooks=function(){return this.hooks},e.prototype.getHook=function(e){return this.hooks[e]},e.prototype.triggerHook=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getHook(e);r&&r.apply(void 0,t)},e}();t.HooksHandler=n},253:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.lang=t.LanguageManager=void 0;var r=function(){function e(){this.translations={},this.currentLanguage="en"}return e.prototype.setCurrentLanguage=function(e){this.currentLanguage=e},e.prototype.getCurrentLanguage=function(){return this.currentLanguage},e.prototype.addTranslations=function(e,t){this.translations[e]=n(n({},this.translations[e]),t)},e.prototype.getTranslation=function(e,t){var n;return void 0===t&&(t={}),((null===(n=this.translations[this.currentLanguage])||void 0===n?void 0:n[e])||e).replace(/{(\w+)}/g,(function(e,n){var r;return(null===(r=t[n])||void 0===r?void 0:r.toString())||e}))},e}();t.LanguageManager=r,t.lang=new r},343:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidatorManager=void 0;var i=function(){function e(e,t,n){this.fieldManager=e,this.errorManager=t,this.hooksHandler=n}return e.prototype.validateAll=function(){return n(this,void 0,void 0,(function(){var e,t,n,i;return r(this,(function(r){switch(r.label){case 0:e=this.fieldManager.getAllFields(),this.hooksHandler.triggerHook("onValidationStart",e),t=0,n=e,r.label=1;case 1:return t<n.length?(i=n[t],[4,this.validateField(i.id)]):[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return this.hooksHandler.triggerHook("onValidationEnd",e),[2]}}))}))},e.prototype.validateField=function(e){return n(this,void 0,void 0,(function(){var t,n,i,o;return r(this,(function(r){switch(r.label){case 0:return(t=this.fieldManager.getField(e))?(n=this.fieldManager.getValues(),(i=this.validateFieldSchema(t,n))?(this.updateFieldError(t,i),this.hooksHandler.triggerHook("onFieldValidationError",e,i),[2]):[4,this.validateCustomValidator(t,n)]):[2];case 1:return o=r.sent(),this.updateFieldError(t,o),o&&this.hooksHandler.triggerHook("onFieldValidationError",e,o),[2]}}))}))},e.prototype.validateFieldSchema=function(e,t){if(e.schemaValidation)for(var n=0,r=e.schemaValidation;n<r.length;n++){var i=(0,r[n])(e.value,t);if(i)return i}return null},e.prototype.validateCustomValidator=function(e,t){return n(this,void 0,void 0,(function(){var n,i,o,a,l,u;return r(this,(function(r){switch(r.label){case 0:if(!e.customValidation)return[2,null];n=0,i=e.customValidation,r.label=1;case 1:if(!(n<i.length))return[3,6];o=i[n],a=o.validate,l=o.message,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,Promise.race([Promise.resolve(a(e.value,t)),new Promise((function(e,t){return setTimeout((function(){return t(new Error("Validation timeout"))}),5e3)}))])];case 3:return r.sent()?[3,5]:[2,l];case 4:return u=r.sent(),console.error("Validation error for field ".concat(e.id,":"),u),[2,"Validation timeout"===u.message?"Validation took too long. Please try again.":"An unexpected error occurred during validation."];case 5:return n++,[3,1];case 6:return[2,null]}}))}))},e.prototype.setupDependencyListeners=function(e,t){var n=this;t.forEach((function(t){var r=document.getElementById(t);r&&r.addEventListener("input",(function(){n.validateField(e)}))}))},e.prototype.updateFieldError=function(e,t){e.error=t,this.errorManager.displayErrors(this.fieldManager.getAllFields())},e}();t.ValidatorManager=i},100:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.matches=t.range=t.email=t.pattern=t.maxLength=t.minLength=t.required=void 0;var r=n(253);t.required=function(e){return function(t){return t.trim()?null:e||r.lang.getTranslation("required")}},t.minLength=function(e,t){return function(n){return n.length>=e?null:t||r.lang.getTranslation("minLength",{min:e})}},t.maxLength=function(e,t){return function(n){return n.length<=e?null:t||r.lang.getTranslation("maxLength",{max:e})}},t.pattern=function(e,t){return function(n){return e.test(n)?null:t||r.lang.getTranslation("pattern")}},t.email=function(e){return(0,t.pattern)(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e||r.lang.getTranslation("email"))},t.range=function(e,t,n){return function(i){var o=parseFloat(i);return!isNaN(o)&&o>=e&&o<=t?null:n||r.lang.getTranslation("range",{min:e,max:t})}},t.matches=function(e,t){return function(n,i){return i&&n===i[e]?null:t||r.lang.getTranslation("matches",{fieldToMatch:e})}}}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,i),o.exports}e=i(830),t=i(100),"undefined"!=typeof window&&(window.shadowFormHandler={FormHandler:e.FormHandler,required:t.required,minLength:t.minLength,maxLength:t.maxLength,pattern:t.pattern,email:t.email})})();